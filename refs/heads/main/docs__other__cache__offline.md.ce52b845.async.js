(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[191],{"4vCh":function(e,n,r){"use strict";r.r(n);var t=r("q1tI"),a=r.n(t),l=r("dEAq"),c=r("H1Ra"),s=a.a.memo((e=>{e.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h1",{id:"\u79bb\u7ebf\u5b58\u50a8-service-worker"},a.a.createElement(l["AnchorLink"],{to:"#\u79bb\u7ebf\u5b58\u50a8-service-worker","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u79bb\u7ebf\u5b58\u50a8 Service Worker"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,"Service Worker \u662f\u8fd0\u884c js \u4e3b\u7ebf\u7a0b\u4e4b\u5916\u7684\uff0c\u5728\u6d4f\u89c8\u5668\u80cc\u540e\u7684\u72ec\u7acb\u7ebf\u7a0b\uff0c\u81ea\u7136\u4e5f\u65e0\u6cd5\u8bbf\u95ee DOM\uff0c\u5b83\u76f8\u5f53\u4e8e\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u62e6\u622a\u7528\u6237\u53d1\u51fa\u7684\u8bf7\u6c42\uff0c\u4fee\u6539\u8bf7\u6c42\u6216\u8005\u76f4\u63a5\u5411\u7528\u6237\u53d1\u51fa\u56de\u5e94\uff0c\u4e0d\u7528\u8054\u7cfb\u670d\u52a1\u5668\u3002\u6bd4\u5982\u52a0\u8f7d JS \u548c\u56fe\u7247\uff0c\u8fd9\u5c31\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728\u79bb\u7ebf\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u7f51\u7edc\u5e94\u7528")),a.a.createElement("li",null,a.a.createElement("p",null,"\u4e00\u822c\u7528\u4e8e\u79bb\u7ebf\u7f13\u5b58(\u63d0\u9ad8\u9996\u5c4f\u52a0\u8f7d\u901f\u5ea6)\u3001\u6d88\u606f\u63a8\u9001\u3001\u7f51\u7edc\u4ee3\u7406\u7b49\u529f\u80fd\u3002\u4f7f\u7528 Service Worker \u7684\u8bdd\u5fc5\u987b\u4f7f\u7528 https \u534f\u8bae\uff0c\u56e0\u4e3a Service Worker \u4e2d\u6d89\u53ca\u5230\u8bf7\u6c42\u62e6\u622a\uff0c\u9700\u8981 https \u4fdd\u969c\u5b89\u5168")),a.a.createElement("li",null,a.a.createElement("p",null,"\u7528 Service Worker \u6765\u5b9e\u73b0\u7f13\u5b58\u5206\u4e09\u6b65\uff1a"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u4e00\u662f\u6ce8\u518c"),a.a.createElement("li",null,"\u7136\u540e\u76d1\u542c install \u4e8b\u4ef6\u540e\u5c31\u53ef\u4ee5\u7f13\u5b58\u6587\u4ef6"),a.a.createElement("li",null,"\u4e0b\u6b21\u518d\u8bbf\u95ee\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u901a\u8fc7\u62e6\u622a\u8bf7\u6c42\u7684\u65b9\u5f0f\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u7684\u6570\u636e")))),a.a.createElement(c["a"],{code:"// index.js \u6ce8\u518c\nif (navigator.serviceWorker) {\n  navigator.serviceWorker\n    .register('sw.js')\n    .then((registration) => {\n      console.log('service worker \u6ce8\u518c\u6210\u529f');\n    })\n    .catch((err) => {\n      console.log('servcie worker \u6ce8\u518c\u5931\u8d25');\n    });\n}\n// sw.js  \u76d1\u542c `install` \u4e8b\u4ef6\uff0c\u56de\u8c03\u4e2d\u7f13\u5b58\u6240\u9700\u6587\u4ef6\nself.addEventListener('install', (e) => {\n  // \u6253\u5f00\u6307\u5b9a\u7684\u7f13\u5b58\u6587\u4ef6\u540d\n  e.waitUntil(\n    caches.open('my-cache').then((cache) => {\n      // \u6dfb\u52a0\u9700\u8981\u7f13\u5b58\u7684\u6587\u4ef6\n      return cache.addAll(['./index.html', './index.css']);\n    }),\n  );\n});\n// \u62e6\u622a\u6240\u6709\u8bf7\u6c42\u4e8b\u4ef6 \u7f13\u5b58\u4e2d\u6709\u8bf7\u6c42\u7684\u6570\u636e\u5c31\u76f4\u63a5\u7528\u7f13\u5b58\uff0c\u5426\u5219\u53bb\u8bf7\u6c42\u6570\u636e\nself.addEventListener('fetch', (e) => {\n  // \u67e5\u627erequest\u4e2d\u88ab\u7f13\u5b58\u547d\u4e2d\u7684response\n  e.respondWith(\n    caches.match(e.request).then((response) => {\n      if (response) {\n        return response;\n      }\n      console.log('fetch source');\n    }),\n  );\n});",lang:"js"})))}));n["default"]=e=>{var n=a.a.useContext(l["context"]),r=n.demos;return a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(s,{demos:r})}}}]);